<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Stellar Blade Checklist</title>
  <style>
    /* Base Styles */
    body {
      font-family: sans-serif;
      margin: 20px;
      background: #121212;
      color: #ddd;
    }

    h1 {
      text-align: center;
      margin: 0 auto 20px;
      max-width: 1280px;
      border-radius: 8px;
    }

    /* Container & Layout */
    .content-container {
      position: relative;
      max-width: 1280px;
      margin: 60px auto 0;
    }

    /* Menu */
    .menu {
      position: absolute;
      top: -60px;
      left: 0;
    }

    .menu-button {
      background: #212121;
      border: 1px solid #444;
      padding: 10px 20px;
      cursor: pointer;
      border-radius: 8px;
    }

    .dropdown {
      display: none;
      position: absolute;
      left: 0;
      background: #212121;
      border: 1px solid #444;
      border-radius: 8px;
      min-width: 160px;
      z-index: 1;
    }

    .dropdown div {
      padding: 10px;
      cursor: pointer;
    }

    .dropdown div:hover {
      background: #383838;
    }

    /* Content */
    .content {
      display: none;
      border: 1px solid #444;
      padding: 20px;
      background: #212121;
      margin-top: 40px;
      border-radius: 8px;
      max-width: 1280px;
      margin-left: auto;
      margin-right: auto;
    }

    .content.active {
      display: block;
    }

    /* List & Checkbox */
    ul {
      list-style: none;
      padding: 0;
    }

    li {
      margin: 5px 0;
    }

    input[type=checkbox]:checked + label {
      text-decoration: line-through;
      color: #888;
    }

    /* Tags */
    .tag {
      font-size: 0.9em;
      padding: 4px 8px;
      border-radius: 8px;
      display: inline-block;
      margin-left: 10px;
      color: #121212;
    }

    .tagRequired   { background: #ff8a80; }
    .tagOptional   { background: #d8d8d4; }
    .tagGiver      { background: #80d8ff; }
    
    .tagNote       {
      color: #aaa;
      background: #1a1a1a;
      padding: 4px 8px; 
      border-radius: 8px; 
      display: block; 
      margin-left: 20px; 
      margin-top: 4px; 
      width: fit-content; 
      max-width: 100%; 
      box-sizing: border-box; 
      word-wrap: break-word; 
     }
     
    .tagMelee      { background: #ffd180; }
    .tagPistol     { background: #ffd180; }
    .tagRifle      { background: #ffd180; }
    .tagCannon     { background: #ffd180; }
    .tagShotgun    { background: #ffd180; }
    .tagEnergy	   { background: #ffd180; }
    
    .tagDLC      { background: #f7bf00; }
  </style>
</head>
<template id="github-link-template-faq">
  <a href="https://github.com/Lepehn/stellar-blade-checklist" target="_blank" style="color: #88c0d0; text-decoration: none;">
    GitHub repository
  </a>
</template>
<template id="github-link-template-footer">
  <a href="https://github.com/Lepehn/stellar-blade-checklist" target="_blank" style="color: #88c0d0; text-decoration: none;">
    report an issue on GitHub
  </a>
</template>
<body>
  <h1>Stellar Blade Checklist</h1>
  
  <div class="content-container">
    <!-- Menu -->
    <div class="menu">
      <div class="menu-button">☰ Menu</div>
      <div class="dropdown">
        <div data-target="main">Main Quests</div>
        <div data-target="side">Side Quests</div>
        <div data-target="request">Requests</div>
        <div data-target="faq">FAQ</div>
      </div>
    </div>

    <!-- Main Quests -->
    <div class="content active" id="main">
      <h2>Main Quests</h2>
      <div class="progress" id="main-Progress">Completed 0 / 0</div>
      <ul id="main-Quests"></ul>
    </div>
    
    <!-- Side Quests -->
    <div class="content" id="side">
      <h2>Side Quests</h2>
      <div class="progress" id="side-Progress">Completed 0 / 0</div>
      <ul id="side-Quests"></ul>
    </div>
    
    <!-- Requests -->
    <div class="content" id="request">
      <h2>Requests</h2>
      <div class="progress" id="request-Progress">Completed 0 / 0</div>
      <ul id="requests"></ul>
    </div>

    <!-- FAQ -->
    <div class="content" id="faq">
      <h3>FAQ</h3>
      <p>The foundation of this guide was based on Stephen McNabb's Dark Soul 2 Cheat Sheet source code.</p>
      <p>This checklist has been compiled using IGN and wiki pages.</p>
      <p><strong>I have feedback, how can I contribute?</strong><br>
        You can visit the <span id="faq-link-container"></span> and report Issues or create a fork and submit a Pull Request.
      </p>
      <p><strong>Is this a guide?</strong><br>
        Nope, not really. This is a set of checklists and information that you can use while playing Stellar Blade.
      </p>
      <p><strong>How does the checklist status get saved?</strong><br>
        The checklist is saved to your browser's local storage. Be careful when clearing your browser's cache as it will also destroy your saved progress.
      </p>
    </div>
  </div>
  
  <!-- Script -->
  <script>
    const menuButton = document.querySelector('.menu-button');
    const dropdown = document.querySelector('.dropdown');

    menuButton.addEventListener('click', () => {
      dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
    });

    dropdown.querySelectorAll('div[data-target]').forEach(item => {
      item.addEventListener('click', () => {
        document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
        document.getElementById(item.dataset.target).classList.add('active');
        dropdown.style.display = 'none';
      });
    });

    const mainQuests = [
      {title: "7th Airborne Squad"},
      {title: "Scavenger Adam"},
      {title: "Xion, the Last Remaining City"},
      {title: "Altess Levoire"},		
      {title: "Light of Hope"},	
      {title: "Alpha Signal"},
      {title: "Hidden Truth"},
      {title: "Abyss Levoire"},
      {title: "Orcal's Testimony"},
      {title: "Secret Garden"},
      {title: "Eye of the Hurricane"},
      {title: "Burning Xion"},
      {title: "Last Fragment"},
      {title: "Selection of Species"},
      {title: "EVE Protocol"}
    ];
    
    const sideQuests = [
      {title: "A Treasure with a Name"},
      {title: "A United People Cannot Be Defeated"}, 
      {title: "An Eye for an Eye, a Tooth for a Tooth"},
      {title: "An Offer You Can't Refuse"},
      {title: "An Unknown Present"},
      {title: "Angel of Death"},
      {title: "Barry and Wine"},
      {title: "CnL - Communicate and Link"},
      {title: "Encounter"},
      {title: "End of the Nightmare"},
      {title: "Fallen Angel"},
      {title: "First Customer"},
      {title: "I Won't Forget You"},
      {title: "Incarceration"},
      {title: "Keeping Secrets"},
      {title: "Let There Be Light Again"},
      {title: "Life of the Scavengers"},
      {title: "Looking at You"},
      {title: "Looking Glass"},
      {title: "Lost Ark"},
      {title: "Madama Machine"},
      {title: "Memories in the Doll"},
      {title: "Oblivion"},
      {title: "Plan to Clean the Earth"},
      {title: "Reboot!"},
      {title: "Reboot!!!"},
      {title: "Siren's Song"},
      {title: "Stolen Treasure"},
      {title: "Stubbornness"},
      {title: "Taboo"},
      {title: "The King of the Tunnel"},
      {title: "The Scavenger's Story"},
      {title: "The Words of Mother Sphere"},
      {title: "Urgent Information"}
    ];

    const request = [
      {title: "An Unforgettable Fish Dish"},
      {title: "Find the Cat"},
      {title: "Generous Drop Pod"},
      {title: "Legion's Secret Stash"},
      {title: "Looking for My Brother"},
      {title: "Lost Device"},
      {title: "Lurker Hunt"},
      {title: "Missing Husband"},
      {title: "Missing Wife"},
      {title: "Precious Treasure"},
      {title: "Recruit Passcode Specialists"},
      {title: "Simple Puzzle"},
      {title: "Sleeping Beauty"},
      {title: "Source of the Nightmare"},
      {title: "The Last Wine"},
      {title: "Time for Revenge"},
      {title: "Valuable Cargo"},
      {title: "Where's the Item"},
      {title: "Wife's Medicine"},
      {title: "Wife's Water Tank"},
      {title: "Wisdom Puzzle"}
    ];

    function createTag(text, className) {
      const span = document.createElement("span");
      span.className = `tag ${className}`;
      span.textContent = text;
      return span;
    }

    function createChecklistItem(item, type, container) {
      const id = `${type}-${item.title.replace(/\s+/g, '-').toLowerCase()}`;
      const li = document.createElement("li");

      const checkbox = document.createElement("input");
      checkbox.type = "checkbox";
      checkbox.id = id;
      checkbox.checked = localStorage.getItem(id) === 'true';
       const progressIdMap = {
        'main-Quests': 'main-Progress',
        'side-Quests': 'side-Progress',
        'requests': 'request-Progress',
      };
      checkbox.addEventListener('change', () => {
        localStorage.setItem(id, checkbox.checked);
        const progressId = progressIdMap[container.id];
        if(progressId) updateProgress(progressId, type);
      });


      const label = document.createElement("label");
      label.setAttribute("for", id);
      label.textContent = ` ${item.title}`;

      li.appendChild(checkbox);
      li.appendChild(label);

      if (item.giver) li.appendChild(createTag(item.giver, "tagGiver"));
      if (item.note) li.appendChild(createTag(item.note, "tagNote"));

      if (type === 'boss') {
        const className = item.tag === "Required" ? "tagRequired" : "tagOptional";
        li.appendChild(createTag(item.tag, className));
      }

      if (type === 'weapon') {
        const tags = Array.isArray(item.tag) ? item.tag : [item.tag];
        tags.forEach(t => {
          const className = `tag${t.replace(/\s+/g, '')}`; // e.g. Melee → tagMelee
          li.appendChild(createTag(t, className));
        });
      }

      container.appendChild(li);
      return checkbox;
    }
    
    // Update the progress text for a checklist
    function updateProgress(progressId, type) {
      const progressEl = document.getElementById(progressId);
      if (!progressEl) return;

      // Get the related list by converting progressId to listId
      // e.g. main-progress → main-quests, boss-progress → baseGame-Bosses, weapon-progress → weapons
      let listId;
      if (progressId === 'main-Progress') listId = 'main-Quests';
      else if (progressId === 'side-Progress') listId = 'side-Quests';
      else if (progressId === 'request-Progress') listId = 'requests';
      else return;

      const list = document.getElementById(listId);
      const checkboxes = list.querySelectorAll('input[type=checkbox]');

      let completed = 0;
      checkboxes.forEach(cb => {
        if (cb.checked) completed++;
      });

      progressEl.textContent = `Completed ${completed} / ${checkboxes.length}`;
    }
    
    const mainQuestList = document.getElementById("main-Quests");
    mainQuests.forEach(q => createChecklistItem(q, 'main', mainQuestList));
    updateProgress('main-Progress', 'main');
    
    const sideQuestList = document.getElementById("side-Quests");
    sideQuests.forEach(s => createChecklistItem(s, 'side', sideQuestList));
    updateProgress('side-Progress', 'side');
    
    const requestList = document.getElementById("requests");
    request.forEach(r => createChecklistItem(r, 'request', requestList));
    updateProgress('request-Progress', 'request');
    
    window.addEventListener('DOMContentLoaded', () => {
      const faqTemplate = document.getElementById("github-link-template-faq");
      const footerTemplate = document.getElementById("github-link-template-footer");

      // Clone templates
      const faqClone = faqTemplate.content.cloneNode(true);
      const footerClone = footerTemplate.content.cloneNode(true);

      // Insert into containers
      document.getElementById("faq-link-container").appendChild(faqClone);
      document.getElementById("footer-link-container").appendChild(footerClone);
    });
  </script>

  <!-- Footer -->
<footer style="text-align: center; margin-top: 40px; font-size: 0.9em; color: #aaa;">
  Check out the project or <span id="footer-link-container"></span>.
</footer>
</body>
</html>
